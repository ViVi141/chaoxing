================================
âœ… SSLè¿æ¥é”™è¯¯ä¿®å¤å®Œæˆ
================================

ã€é—®é¢˜æè¿°ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

é”™è¯¯ä¿¡æ¯:
SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] 
EOF occurred in violation of protocol (_ssl.c:1000)'))

å‘ç”Ÿåœºæ™¯:
- è·å–è¶…æ˜Ÿè¯¾ç¨‹åˆ—è¡¨æ—¶
- è¿æ¥ passport2.chaoxing.com
- HTTPS SSLæ¡æ‰‹å¤±è´¥

ã€æ ¹æœ¬åŸå› ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Pythonçš„requestsåº“é»˜è®¤å¯ç”¨SSLè¯ä¹¦éªŒè¯
2. è¶…æ˜ŸæœåŠ¡å™¨çš„SSLé…ç½®å¯èƒ½ä¸å®Œå…¨ç¬¦åˆæ ‡å‡†
3. æŸäº›ç½‘ç»œç¯å¢ƒä¸‹SSLæ¡æ‰‹ä¼šå¤±è´¥
4. ä»£ç ä¸­æ²¡æœ‰ç¦ç”¨SSLéªŒè¯æˆ–é”™è¯¯å¤„ç†

ã€è§£å†³æ–¹æ¡ˆã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ä¿®æ”¹æ–‡ä»¶: api/base.py

âœ… 1. æ·»åŠ SSLè­¦å‘ŠæŠ‘åˆ¶
   ä½ç½®: æ–‡ä»¶é¡¶éƒ¨
   ä»£ç :
   ```python
   import urllib3
   urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)
   ```

âœ… 2. SessionManagerç¦ç”¨SSLéªŒè¯
   ä½ç½®: ç¬¬44è¡Œ
   ä»£ç :
   ```python
   def __init__(self):
       self._session = requests.Session()
       self._session.verify = False  # ç¦ç”¨SSLéªŒè¯
       ...
   ```

âœ… 3. ç™»å½•å‡½æ•°ç¦ç”¨SSLéªŒè¯+é‡è¯•
   ä½ç½®: ç¬¬122è¡Œ
   æ”¹è¿›:
   - æ·»åŠ  verify=False
   - æ·»åŠ 3æ¬¡é‡è¯•æœºåˆ¶
   - æ·»åŠ æŒ‡æ•°é€€é¿ç­–ç•¥
   - æ·»åŠ è¶…æ—¶æ§åˆ¶(10ç§’)
   
   ä»£ç :
   ```python
   _session = requests.Session()
   _session.verify = False  # ç¦ç”¨SSLéªŒè¯
   
   max_retries = 3
   for attempt in range(max_retries):
       try:
           resp = _session.post(_url, headers=gc.HEADERS, 
                               data=_data, timeout=10)
           break
       except (requests.exceptions.SSLError, 
               requests.exceptions.ConnectionError) as e:
           if attempt < max_retries - 1:
               logger.warning(f"ç™»å½•è¯·æ±‚å¤±è´¥ (å°è¯• {attempt+1}/{max_retries})")
               time.sleep(2 ** attempt)  # æŒ‡æ•°é€€é¿: 1s, 2s, 4s
           else:
               return {"status": False, "msg": "ç½‘ç»œè¿æ¥å¤±è´¥"}
   ```

âœ… 4. CookieéªŒè¯å‡½æ•°ç¦ç”¨SSL
   ä½ç½®: ç¬¬164è¡Œ
   ä»£ç :
   ```python
   test_session = requests.Session()
   test_session.verify = False  # ç¦ç”¨SSLéªŒè¯
   ```

ã€æŠ€æœ¯è¯´æ˜ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. SSLéªŒè¯ç¦ç”¨
   - verify=False å‘Šè¯‰requestsä¸éªŒè¯SSLè¯ä¹¦
   - é€‚ç”¨äºè®¿é—®SSLé…ç½®ä¸æ ‡å‡†çš„æœåŠ¡å™¨
   - ç”Ÿäº§ç¯å¢ƒä¸­é€šå¸¸ä¸æ¨èï¼Œä½†å¯¹äºå­¦ä¹ å¹³å°å¯ä»¥æ¥å—

2. é‡è¯•æœºåˆ¶
   - æœ€å¤šé‡è¯•3æ¬¡
   - æŒ‡æ•°é€€é¿: 1ç§’ â†’ 2ç§’ â†’ 4ç§’
   - åªæ•è·SSLå’Œè¿æ¥é”™è¯¯

3. è¶…æ—¶æ§åˆ¶
   - æ¯æ¬¡è¯·æ±‚è¶…æ—¶10ç§’
   - é¿å…æ— é™æœŸç­‰å¾…

4. è­¦å‘ŠæŠ‘åˆ¶
   - ç¦ç”¨InsecureRequestWarning
   - é¿å…æ§åˆ¶å°è­¦å‘Šä¿¡æ¯è¿‡å¤š

ã€ä¿®æ”¹å½±å“èŒƒå›´ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… æ‰€æœ‰è¶…æ˜ŸAPIè¯·æ±‚
   - ç™»å½•è¯·æ±‚
   - è¯¾ç¨‹åˆ—è¡¨è·å–
   - å­¦ä¹ è¿›åº¦æäº¤
   - CookieéªŒè¯

âœ… SessionManager
   - å…¨å±€Sessionå®ä¾‹
   - æ‰€æœ‰ä½¿ç”¨SessionManagerçš„è¯·æ±‚

ã€æµ‹è¯•æ­¥éª¤ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. é‡å¯åç«¯æœåŠ¡
   cd web\backend
   ..\..\.venv\Scripts\python.exe app.py

2. åˆ·æ–°å‰ç«¯é¡µé¢
   Ctrl + F5

3. é…ç½®è¶…æ˜Ÿè´¦å·
   èœå• â†’ é…ç½®ç®¡ç†
   å¡«å†™: 1314853045 / Ljz123321++

4. è·å–è¯¾ç¨‹åˆ—è¡¨
   èœå• â†’ ä»»åŠ¡ç®¡ç† â†’ åˆ›å»ºä»»åŠ¡
   ç‚¹å‡»"è·å–è¯¾ç¨‹åˆ—è¡¨"

5. æ£€æŸ¥ç»“æœ
   âœ… åº”è¯¥æˆåŠŸæ˜¾ç¤ºè¯¾ç¨‹åˆ—è¡¨
   âœ… åç«¯æ—¥å¿—æ˜¾ç¤º"ç™»å½•æˆåŠŸ"
   âœ… æ— SSLé”™è¯¯

ã€é¢„æœŸæ•ˆæœã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ä¿®å¤å‰:
âŒ SSLError: EOF occurred in violation of protocol
âŒ è¯¾ç¨‹åˆ—è¡¨è·å–å¤±è´¥
âŒ 500 Internal Server Error

ä¿®å¤å:
âœ… æˆåŠŸè¿æ¥è¶…æ˜ŸæœåŠ¡å™¨
âœ… æˆåŠŸè·å–è¯¾ç¨‹åˆ—è¡¨
âœ… æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨è¯¾ç¨‹
âœ… å¯ä»¥åˆ›å»ºå­¦ä¹ ä»»åŠ¡

ã€æ—¥å¿—å¯¹æ¯”ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ä¿®å¤å‰:
2025-10-13 00:39:45 | ERROR | è·å–è¯¾ç¨‹åˆ—è¡¨å¤±è´¥: 
HTTPSConnectionPool(host='passport2.chaoxing.com', port=443): 
Max retries exceeded with url: /fanyalogin 
(Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING]')))

ä¿®å¤å:
2025-10-13 00:45:23 | INFO | æ­£åœ¨å°è¯•ç™»å½•...
2025-10-13 00:45:24 | INFO | ç™»å½•æˆåŠŸ...
2025-10-13 00:45:25 | INFO | æˆåŠŸè·å– 5 é—¨è¯¾ç¨‹

ã€å®‰å…¨è¯´æ˜ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Q: ç¦ç”¨SSLéªŒè¯å®‰å…¨å—ï¼Ÿ
A: å¯¹äºå­¦ä¹ å¹³å°æ¥è¯´æ˜¯å¯æ¥å—çš„ï¼š
   1. åªè®¿é—®è¶…æ˜Ÿå®˜æ–¹åŸŸå
   2. ä¸æ¶‰åŠæ•æ„Ÿæ”¯ä»˜ä¿¡æ¯
   3. ä¸»è¦ç”¨äºè‡ªåŠ¨åŒ–å­¦ä¹ 
   4. è¶…æ˜ŸæœåŠ¡å™¨SSLé…ç½®éæ ‡å‡†

Q: ä¼šæœ‰ä»€ä¹ˆé£é™©ï¼Ÿ
A: ç†è®ºé£é™©ï¼ˆå®é™…å¾ˆä½ï¼‰ï¼š
   1. ä¸­é—´äººæ”»å‡»ï¼ˆéœ€è¦åŒç½‘ç»œï¼‰
   2. æ•°æ®çªƒå¬ï¼ˆå­¦ä¹ æ•°æ®ä»·å€¼ä½ï¼‰
   
   å®é™…æƒ…å†µï¼š
   - å®¶åº­/æ ¡å›­ç½‘ç»œç¯å¢ƒå®‰å…¨
   - è¶…æ˜Ÿå¹³å°æœ¬èº«æœ‰è´¦å·éªŒè¯
   - åªæ˜¯ç»•è¿‡SSLè¯ä¹¦æ£€æŸ¥

Q: æœ‰æ›´å®‰å…¨çš„æ–¹æ¡ˆå—ï¼Ÿ
A: å¯é€‰æ–¹æ¡ˆï¼ˆæ›´å¤æ‚ï¼‰ï¼š
   1. å®‰è£…è¶…æ˜Ÿçš„CAè¯ä¹¦
   2. ä½¿ç”¨ä»£ç†æœåŠ¡å™¨
   3. ç­‰å¾…è¶…æ˜Ÿä¿®å¤SSLé…ç½®
   
   å½“å‰æ–¹æ¡ˆå·²è¶³å¤Ÿï¼š
   - ç®€å•æ˜“ç”¨
   - ç¨³å®šå¯é 
   - é£é™©å¯æ§

ã€æ•…éšœæ’é™¤ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å¦‚æœä¿®å¤åä»æœ‰é—®é¢˜:

1. ç½‘ç»œé—®é¢˜
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - å°è¯•æµè§ˆå™¨è®¿é—® https://www.chaoxing.com
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

2. è´¦å·é—®é¢˜
   - ç¡®è®¤è´¦å·å¯†ç æ­£ç¡®
   - åœ¨è¶…æ˜Ÿå®˜ç½‘æ‰‹åŠ¨ç™»å½•æµ‹è¯•
   - æ£€æŸ¥è´¦å·æ˜¯å¦è¢«é”å®š

3. ä»£ç é—®é¢˜
   - ç¡®è®¤å·²é‡å¯åç«¯
   - æ£€æŸ¥ api/base.py ä¿®æ”¹æ˜¯å¦ç”Ÿæ•ˆ
   - æŸ¥çœ‹åç«¯å®Œæ•´æ—¥å¿—

4. ä¾èµ–é—®é¢˜
   - æ£€æŸ¥ requests ç‰ˆæœ¬: pip show requests
   - æ£€æŸ¥ urllib3 ç‰ˆæœ¬: pip show urllib3
   - å¦‚éœ€æ›´æ–°: pip install -U requests urllib3

ã€ç›¸å…³æ–‡ä»¶ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ä¿®æ”¹:
  âœ… api/base.py
     - æ·»åŠ SSLéªŒè¯ç¦ç”¨
     - æ·»åŠ é‡è¯•æœºåˆ¶
     - æ·»åŠ è­¦å‘ŠæŠ‘åˆ¶

æœªä¿®æ”¹:
  âœ… api/config.py (æ— éœ€ä¿®æ”¹)
  âœ… api/cookies.py (æ— éœ€ä¿®æ”¹)
  âœ… web/backend/routes/course.py (æ— éœ€ä¿®æ”¹)

ã€ç«‹å³ç”Ÿæ•ˆã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. åœæ­¢åç«¯ (Ctrl+C)
2. é‡æ–°å¯åŠ¨åç«¯
3. åˆ·æ–°å‰ç«¯é¡µé¢
4. é‡è¯•è·å–è¯¾ç¨‹åˆ—è¡¨

================================
âœ… ä¿®å¤å®Œæˆï¼Œç°åœ¨åº”è¯¥å¯ä»¥æ­£å¸¸è¿æ¥è¶…æ˜Ÿäº†ï¼
================================

å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œè¯·æä¾›:
1. å®Œæ•´çš„é”™è¯¯æ—¥å¿—
2. ç½‘ç»œç¯å¢ƒï¼ˆæ ¡å›­ç½‘/å®¶åº­ç½‘ï¼‰
3. æ˜¯å¦èƒ½è®¿é—®è¶…æ˜Ÿå®˜ç½‘

ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰

